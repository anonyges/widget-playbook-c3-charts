<!-- Copyright start
  Copyright (C) 2008 - 2024 Fortinet Inc.
  All rights reserved.
  FORTINET CONFIDENTIAL & FORTINET PROPRIETARY SOURCE CODE
  Copyright end -->
<!-- author: kimd@fortinet.com
  modified: 240830 -->
<form data-ng-submit="bt_save()" class="noMargin" name="editWidgetForm" data-ng-class="{'state-wait': processing }"
  novalidate>
  <div class="modal-header">
    <h3 class="modal-title col-md-9">Playbook C3 Charts</h3>
    <button type="button" class="close" data-ng-click="bt_cancel()" data-dismiss="modal" aria-label="Close"
      id="close-edit-widget-form-btn">
      <div aria-hidden="true" class="version-button">+</div>
    </button>
  </div>


  <div class="modal-body" id="{{container_uid}}">
    <!-- Title Field -->
    <div class="row">
      <label class="col-md-1">Title:</label>
      <div class="col-md-8" data-cs-field="data_cs_title" data-ng-model="config.title"></div>
      <label class="col-md-2">Show Title:</label>
      <div class="col-md-1">
        <input type="checkbox" data-ng-model="config.title_show">
      </div>
    </div>
    <hr>


    <!-- TODO add on field change render playbook! -->


    <!-- Playbook Selection Rendering -->
    <div class="form-group">
      <div class="display-flex-space-between" style="align-items: center;">
        <span>Select Playbook to Render</span>
        <span class="fa btn widget-action-icon btn-sm pull-right"
          data-ng-click="dp_playbook_1.data_cs_selected_playbook_ng_hide = !dp_playbook_1.data_cs_selected_playbook_ng_hide"
          data-ng-class="{'fa-caret-up': !dp_playbook_1.data_cs_selected_playbook_ng_hide, 'fa-caret-down': dp_playbook_1.data_cs_selected_playbook_ng_hide}"></span>
      </div>
      <div data-ng-if="!dp_playbook_1.data_cs_selected_playbook_ng_hide" class="form-group">
        <div data-ng-show="!processing" class="ng-scope" aria-hidden="false">
          <div data-cs-playbook-lookup="dp_playbook_1.scope.config.data_cs_selected_playbook"></div>
          <div data-cs-messages="editWidgetForm.playbookReference" class="text-danger"></div>
        </div>
        <div class="row" data-ng-show="dp_playbook_1.scope.config.data_cs_selected_playbook !== null">
          <div class="col-md-2">
            <button type="button" class="btn btn-sm btn-danger pull-left"
              data-ng-click="dp_playbook_1.bt_clear_data_cs_selected_playbook()">Clear</button>
          </div>
          <div class="col-md-8">
            <span class="pull-left margin-right-md">Playbook Status:</span>
            <span class="pull-left margin-right-md">{{dp_playbook_1.scope.playbook_status}}</span>
          </div>
          <div class="col-md-2">
            <button class="btn btn-sm btn-default pull-right"
              data-ng-click="dp_playbook_1.bt_csOpenExecutionLog()">Log</button>
          </div>
        </div>

        <!-- Playbook Result -->
        <div class="form-group" data-ng-show="dp_playbook_1.scope.workflow_id">
          <div class="display-flex-space-between" style="align-items: center;">
            <span>Playbook Result</span>
            <span class="fa btn widget-action-icon btn-sm pull-right"
              data-ng-click="dp_playbook_1.data_cs_playbook_result_ng_hide = !dp_playbook_1.data_cs_playbook_result_ng_hide"
              data-ng-class="{'fa-caret-up': !dp_playbook_1.data_cs_playbook_result_ng_hide, 'fa-caret-down': dp_playbook_1.data_cs_playbook_result_ng_hide}"></span>
          </div>
          <div data-ng-hide="dp_playbook_1.data_cs_playbook_result_ng_hide">
            <div data-cs-field="dp_playbook_1.scope.data_cs_playbook_result"
              data-ng-model="dp_playbook_1.scope.data_cs_playbook_result_model">
            </div>
          </div>
        </div>

        <cs-spinner data-ng-show="processing" class="ng-scope ng-isolate-scope ng-hide" aria-hidden="true">
          <div class="loader" data-ng-class="{'background' : showBackground, 'margin-0': noMargin}">
            <div class="cs-spinner"></div>
          </div>
        </cs-spinner>
      </div>
    </div>
    <hr>


    <!-- Rendered Chart -->
    <div class="form-group">
      <div class="display-flex-space-between" style="align-items: center;">
        <span>Rendered Chart</span>
        <div>
          <span class="fa btn widget-action-icon icon icon-refresh btn-sm pull-right"
            data-ng-click="render_chart()"></span>
          <span class="fa btn widget-action-icon btn-sm pull-right" data-ng-click="chart_ng_hide = !chart_ng_hide"
            data-ng-class="{'fa-caret-up': !chart_ng_hide, 'fa-caret-down': chart_ng_hide}"></span>
        </div>
      </div>
      <div id="{{chart_uid}}"></div>
    </div>
  </div>


  <div class="modal-footer">
    <button id="edit-widget-save" type="submit" class="btn btn-sm btn-primary"><i
        class="icon icon-check margin-right-sm"></i>Save</button>
    <button id="edit-widget-cancel" type="button" class="btn btn-sm btn-default" data-ng-click="bt_cancel()"><i
        class="icon icon-close margin-right-sm"></i>Close</button>
  </div>
</form>